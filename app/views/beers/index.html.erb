<% provide(:title, "Search") %>
<h1>Search for Beer!</h1>

<%= form_tag beers_path, :method => 'get' do %>
  <%= text_field_tag :beer_name, params[:search] %>
  <%= submit_tag "Search", :name => nil %>
<% end %><br />

<div class="results">
  <% if @result != nil %>
    <% if @result["data"].nil? %>
      <h2>No results found</h2>
    <% else %>
      <% @result["data"].each do | beer | %>
        <p> 
                                <h1><%= name(beer) %></h1>
          Style:                    <%= style(beer) %><br />
          ABV%:                     <%= abv(beer) %><br />
          IBUs:                     <%= ibu(beer) %><br />
          Description:              <%= description(beer) %><br />
          AVAILABILITY:             <%= when_available(beer) %><br />
          SERVE IN:                 <%= glass_type(beer) %><br />
          
          <b>Label:</b>             <%= label_for(beer) %><br />
          <b>Style Description:</b> <%= style_description(beer) %>
        </p>
        <%= form_for(:beer, url: beers_path) do |f| %>
          <%= f.select(:cellar_id, options_for_select(@cellars.map { |cellar| [cellar.title, cellar.id]})) %>
          <%= f.hidden_field :beer_name, value: name(beer) %>
          <%= f.hidden_field :style, value: style(beer) %>
          <%= f.hidden_field :abv, value: abv(beer) %>
          <%= f.hidden_field :glassware, value: glass_type(beer) %>
          <%= f.submit "Add to Cellar" %>
        <% end %>
        <hr>
      <% end %>
    <% end %>
  <% end %>
</div>